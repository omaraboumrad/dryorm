{% load static %}
<!DOCTYPE html>
<html class="no-js h-full" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}Dry ORM{% endblock %}</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                darkMode: 'class',
                theme: {
                    extend: {
                        colors: {
                            'django': {
                                'primary': '#0C4B33',
                                'primary-light': '#1f7963',
                                'primary-dark': '#0f4238',
                                'secondary': '#44B78B',
                                'tertiary': '#47bd90',
                                'bg': '#F8F8F8',
                                'text': '#333333'
                            }
                        }
                    }
                }
            }
        </script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.30.0/codemirror.min.css">
        <link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}" />
        <style>

            .htmx-indicator{
                opacity:0;
                transition: opacity 500ms ease-in;
            }
            .htmx-request .htmx-indicator{
                opacity:1;
            }
            .htmx-request.htmx-indicator{
                opacity:1;
            }

            [x-cloak] { display: none !important; }

            .CodeMirror { font-size: .9rem; overflow: auto; }
            .CodeMirror-gutter { background: #44b78b1a; color: #999; }
            .cm-string { color: #164 !important; font-weight: 500 !important;}
            .cm-number { color: #164 !important; }
            .cm-def { color: #0C4B33 !important; font-weight: bold; }
            .cm-keyword { color: #0C4B33 !important; font-weight: bold; }
            .cm-builtin { color: #0C4B33 !important;}
            .cm-comment { color: gray !important;}

            /* Line numbers with queries */
            .has-query .CodeMirror-linenumber {
                color: #0C4B33 !important;
                font-weight: bold !important;
                background-color: #44b78b1a !important;
                border-radius: 2px;
            }

            /* Highlight line on hover */
            .has-query:hover {
                background-color: #44b78b1a !important;
            }

            /* Query highlight styles */
            .query-highlight {
                background-color: #44b78b1a !important;
            }

            /* Persistent query highlight (for highlight all button) */
            .query-highlight-persistent {
                background-color: #44b78b1a !important;
            }

            /* Query item highlight styles */
            .query-highlighted {
                background-color: #44b78b1a !important;
                border-color: #44B78B !important;
            }

            /* Dark mode styles for CodeMirror */
            .dark .CodeMirror {
                background: #0f2e1e !important;
                color: #d1fae5 !important;
            }
            .dark .CodeMirror-gutter {
                background: #1a5c34 !important;
                color: #86efac !important;
            }
            .dark .cm-string { color: #6ee7b7 !important; }
            .dark .cm-number { color: #6ee7b7 !important; }
            .dark .cm-def { color: #34d399 !important; font-weight: bold; }
            .dark .cm-keyword { color: #34d399 !important; font-weight: bold; }
            .dark .cm-builtin { color: #34d399 !important;}
            .dark .cm-comment { color: #86efac !important;}

            /* Dark mode line numbers with queries */
            .dark .has-query .CodeMirror-linenumber {
                color: #10b981 !important;
                font-weight: bold !important;
                background-color: #1a5c34 !important;
            }

            /* Dark mode highlight line on hover */
            .dark .has-query:hover {
                background-color: #1a5c34 !important;
            }
            
            /* Dark mode query highlight */
            .dark .query-highlight {
                background-color: #1a5c34 !important;
            }

            /* Dark mode persistent query highlight */
            .dark .query-highlight-persistent {
                background-color: #1a5c34 !important;
            }

            /* Dark mode query item highlight */
            .dark .query-highlighted {
                background-color: #1a5c34 !important;
                border-color: #34d399 !important;
            }
        </style>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-MY7ZELY01L"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-MY7ZELY01L');
        </script>
    </head>
    <body class="bg-django-bg dark:bg-green-950 h-full flex flex-col" {% block data %}{% endblock %}>
        <nav class="flex items-center justify-between bg-django-primary dark:bg-green-900">
            <a class="flex items-center gap-3 p-4 text-4xl font-bold text-white whitespace-nowrap" href="{% url 'index' %}">
                <div class="hidden md:inline">
                    <c-icons.dryorm size="8" color="text-white"/>
                </div>
                <span class="text-2xl sm:4xl">DryORM</span>
            </a>
            <div class="flex items-center gap-2" >
                <div class="flex items-center gap-1">
                    <a href="{% url 'list' %}" class="px-1 rounded-sm font-medium text-white hover:underline w-full">
                        <c-icons.list class="w-9 h-9 text-white"/>
                    </a>
                    <a href="{% url 'about' %}" class="px-1 rounded-sm font-medium text-white hover:underline w-full">
                        <c-icons.info class="w-9 h-9 text-white"/>
                    </a>
                </div>
                {% block actions %}{% endblock %}
                <button id="theme-toggle" class="hidden px-2 py-2 rounded-sm font-medium text-white hover:bg-django-primary-light transition-colors" title="Toggle dark mode">
                    <svg id="theme-toggle-dark-icon" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05 5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636 16.95 7.05M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/>

                    </svg>
                    <svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 2L13.09 8.26L20 9L14 14.74L15.18 21.02L10 17.77L4.82 21.02L6 14.74L0 9L6.91 8.26L10 2Z" fill-rule="evenodd" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </nav>

        <div class="flex flex-1 overflow-auto">
            {% block content %}{% endblock %}
        </div>

        <footer class="mt-auto py-5 px-6 bg-django-primary text-white text-sm hidden lg:block">
            <p>Dry ORM is not associated with the Django Software Foundation.</p>
            <p>
                Django is a <a class="underline" href="https://www.djangoproject.com/trademarks/">registered trademark</a> of the <a class="underline" href="https://www.djangoproject.com/foundation/">Django Software Foundation</a>.
            </p>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"></script>
        <script src="//unpkg.com/alpinejs" defer></script>
    </body>
</html>
